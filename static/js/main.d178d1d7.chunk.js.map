{"version":3,"sources":["components/equipTable.js","components/enchantTable.js","components/equipSelector.js","App.js","components/materialTreeSection.js","reportWebVitals.js","index.js"],"names":["items","require","EQUIP_COLUMNS","Config","TABLE_LIMIT","forwardRef","props","ref","originEquips","React","useState","filterdEquips","setFilterdEquips","slice","equips","setEquips","column","type","sortStatus","setSortStatus","overEquip","setOverEquip","useImperativeHandle","updateEquipList","equip_list","className","onScroll","e","target","scrollHeight","scrollTop","offsetHeight","concat","length","style","whiteSpace","borderCollapse","map","onClick","_filterdEquips","sortBy","reverse","new_equips","changeSorting","equip","i","row","selectEquip","closeEquipModal","onMouseOver","target_equip","origin_material","material_tree","_material_tree","num","materials","check_material","material","parent_name","parent_num","Object","keys","material_name","_material","total_num","get_origin_materials","name","dom","key","hoverEquip","onMouseOut","j","accessor","ENCHANTMENT_COLUMNS","RARELITY_INFOS","originEnchants","filterdEnchants","setFilterdEnchants","enchants","setEnchants","window","scrollY","marginTop","targetEnchant","setTargetEnchant","useEffect","sectionDom","tbodyDom","mouseMove","index","call","closest","children","indexOf","document","querySelector","left","scrollX","offsetLeft","scrollLeft","clientX","top","offsetTop","clientY","_filterdEnchants","new_enchants","onMouseMove","onMouseIn","datas","value","filter","n","undefined","push","enchant","selected","equip_part","enchantments","selectEnchant","closeEnchantModal","color","EquipSelector","state","isEquipOpen","isEnchantOpens","targetEquip","targetEnchants","searchEquipText","searchEnchantTexts","timeOutId","frame_position","parent","equips_list","enchantment_list","openEquipModal","bind","handleEquipChange","onBlurHandler","onFocusHandler","onClickHandler","equipTableRef","createRef","enchantTableRef","_","enchantTableDom","enchantStatus","this","setState","updateStatus","equipPartRefs","current","closeAllModal","_enchantTable","currentState","filterd_equips_list","_searchEnchantTexts","filterd_enchant_list","enchantment","setTimeout","clearTimeout","filtered_equips_list","equipTableDom","data","filtered_enchantment_list","id","target_enchant","enchantInfoBalloon","position","zIndex","maxWidth","MaterialInfo","atk","matk","def","aspd","clearEquip","autoComplete","size","onChange","setEquipTable","clearEnchant","handleEnchantChange","openEnchantModal","setEnchantTable","mouseOut","Component","EQUIP_LABELS","STATUS_LABELS","INPUT_STATUS_LABELS","UNIQUE_LABELS","EQUIP_STATUS_KEY_LABELS","STATUS_RANGES","head_equips","body_equips","glider_equips","accessory_equips","other_equips","shield_equips","one_h_sword_equips","two_h_sword_equips","spear_equips","bow_equips","gun_equips","tool_equips","ENCHANT_CONVERTER","エンチャント名","ATK","ATK割合","MATK","MATK割合","DEF","DEF割合","最大スタ","最大スタ割合","最大マナ","最大マナ割合","最大ライフ","最大ライフ割合","最大満腹度","最大満腹度割合","移動速度","空中速度","ASPD","アイテムCD","スキルCD","物理クリダメ","物理クリ確率","魔法クリダメ","魔法クリ確率","マナ自然回復量","スタミナ自然回復量","満腹度消費量","old_key","new_key","assign","where_to_equip","equip_parts","code","title","options","right","target_json_name","json_datas","eval","json_data","EQUIP_STATUS_KEY","EQUIP_STATUS_LABEL","list","status","life","stamina","mana","hunger","mv","amv","item_cd","skill_cd","crit_per","crit_dmg","mcrit_per","mcrit_dmg","mana_recovery_per","stamina_recovery_per","hunger_utility_per","basic_status","addition_status","multiply_per_status","multiply_per_sum_status","per_status","unique_status","def_for_atk","def_for_matk","unique_result_status","App","materialTreeRefs","result_status","targetSave","titleNames","targetTable","material_enchants","Array","changeBasicStatus","openEnchantTable","importSavedata","exportSavedata","clearAll","res","key1","key2","a","replace","Math","round","_basic_status","equip_part_ref","table_index","enchantIndex","fileFrames","getElementsByClassName","fileFrame","classList","remove","add","strage_index","savedata_str","localStorage","getItem","savedata","JSON","parse","equip_part_index","equip_name","enchantment_index","save_enchantment_name","status_key","stringify","setItem","element","scroll","behavior","addEventListener","enchant_table_doms","display","role","min","textAlign","width","setPerResult","Info","gamepatch","href","MaterialTreeChild","MaterialTree","equipPart","equipRefs","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.d178d1d7.chunk.js","sourcesContent":["import \"./equipTable.css\"\n\nimport React, {forwardRef, useImperativeHandle}  from 'react';\nimport { sortBy } from \"lodash-es\";\n\nimport Config from '../configs/configs.json'; // 追加\nconst items = require('../assets/item_infos/item.json');\n\nconst EQUIP_COLUMNS = Config.EQUIP_COLUMNS\nconst TABLE_LIMIT = Config.TABLE_LIMIT\n\n\nexport default forwardRef((props, ref) => {\n  // console.log(\"EquipTable\", EQUIP_COLUMNS, props[\"data\"]);\n\n  let originEquips = props[\"data\"]\n  let [filterdEquips, setFilterdEquips] = React.useState(originEquips)\n  let [equips, setEquips] = React.useState(originEquips.slice(0, TABLE_LIMIT));\n  let [sortStatus, setSortStatus] = React.useState({column:null, type:null});\n\n  let [overEquip, setOverEquip] = React.useState((<div></div>));\n\n  const selectEquip = (e, row) => {\n    // console.log(\"Table selectEquip\", e, row, props)\n\n    //親\n    props[\"parent\"].selectEquip(row);\n    props[\"parent\"].closeEquipModal();\n  }\n\n  const changeSorting = (column) =>{\n    setSortStatus({column: column, type: sortStatus[\"type\"]===\"asc\"? \"desc\": \"asc\"})\n    \n    let _filterdEquips;\n    if (sortStatus[\"type\"]===\"asc\"){\n      _filterdEquips = sortBy(originEquips, column)\n    }else{\n      _filterdEquips = sortBy(originEquips, column).reverse()\n    }\n    \n    setFilterdEquips(_filterdEquips)\n    let new_equips = _filterdEquips.slice(0, TABLE_LIMIT)\n    setEquips(new_equips)\n    // console.log(\"sortStatus\", sortStatus)\n  }\n  \n  const trackScrolling = (e) => {\n    // console.log(e, e.target.offsetHeight, e.target.scrollTop, e.target.scrollHeight)\n    if(e.target.scrollHeight <= e.target.scrollTop + e.target.offsetHeight){\n      // console.log(\"filterdEnchants\", filterdEquips)\n      setEquips(equips.concat(filterdEquips.slice(equips.length, equips.length+TABLE_LIMIT)))\n      // console.log(\"bottom\", e, equips)\n    }\n  };\n\n  const hoverEquip = (e, target_equip) => {\n    // console.log(\"target_equip\", target_equip)\n  \n    let origin_material = {}\n  \n    let material_tree = {};\n    let _material_tree = {num:1, materials:{}}\n    material_tree[target_equip[\"name\"]] = _material_tree;\n    \n    check_material(target_equip.materials, _material_tree[\"materials\"], target_equip[\"name\"], 1)\n    get_origin_materials(target_equip[\"name\"], _material_tree, origin_material)\n\n    function check_material(material, material_tree, parent_name, parent_num){\n      if(material!==null){\n        for (let material_name of Object.keys(material)){\n  \n          let _material = items[material_name]\n          \n          let total_num = material[material_name]*parent_num\n          \n          let _material_tree = {num: total_num, materials:{}}\n          material_tree[material_name] = _material_tree\n          \n          if(parent_name===material_name)continue;\n          \n          check_material(_material[\"materials\"], _material_tree[\"materials\"], material_name, total_num);\n        }\n      }\n    }\n    \n    function get_origin_materials(name, material, origin_material){\n      if (material[\"materials\"]==null || Object.keys(material[\"materials\"]).length===0){\n        if(origin_material[name]==null){\n          origin_material[name] = material[\"num\"]\n        }else{\n          origin_material[name] += material[\"num\"]\n        }\n      }\n      \n      for (let material_name of Object.keys(material[\"materials\"])){\n        let _material = material[\"materials\"][material_name]\n        get_origin_materials(material_name, _material, origin_material)\n      }\n    }\n    \n    let dom = (\n      <>\n        {\n          Object.keys(material_tree).map((key, i)=>{\n            // console.log(\"\\t\", material_tree)\n            return (\n              <div className=\"overOriginMaterial\">\n                <div className=\"headTable\">原材料合計</div>\n                <div>\n                  {\n\n                    (Object.keys(origin_material).length===1&&Object.keys(origin_material)[0]==key)?\n                    (<div>なし</div>):\n                    Object.keys(origin_material).map((key, i)=>{\n                      return(<div>{key}×{origin_material[key]}</div>)\n                    })\n                  \n                  }\n                </div>\n              </div>\n  \n            )\n          })\n        }\n      </>\n    );\n    setOverEquip(dom)\n  }\n\n  const outEquip = (e) => {\n    setOverEquip(<div></div>)\n  }\n  \n  useImperativeHandle(ref, () => ({\n    updateEquipList(equip_list) {\n      setEquips(equip_list);\n    }\n  }));\n\n  return (\n    <section className=\"equipTableSection\">\n      {overEquip}\n      <div className=\"tableMaster modalTable\" onScroll={trackScrolling}>\n        <table \n          className=\"equipTable\"\n          style={{whiteSpace: \"nowrap\", borderCollapse: \"collapse\"}}\n        >\n          <thead>\n            <tr>\n              {EQUIP_COLUMNS.map(column => (\n                <th onClick={()=>{changeSorting(column['accessor'])}}>\n                  {column['Header']}\n                  <span>{sortStatus[\"column\"]===column['accessor'] ? (sortStatus[\"type\"]===\"asc\" ? ' ▼' : ' ▲') : ' 　'}</span>\n                </th>\n              ))}\n            </tr>\n          </thead>\n          <tbody>\n            {equips.map((equip, i)  => {\n              let style={}\n\n              let row = (\n                <tr\n                    style={style}\n                    onClick={(e) => selectEquip(e, equip)}\n                    onMouseOver ={(e) => hoverEquip(e, equip)}\n                    onMouseOut ={(e) => outEquip(e)}\n                >\n                  {EQUIP_COLUMNS.map((column, j) => (\n                    <td>\n                      {equip[column.accessor]}\n                    </td>\n                  ))}\n                  {/* <MaterialTree key={i} equip={equip} parent={this} /> */}\n                </tr>\n              )\n              return row\n            })}\n          </tbody>\n        </table>\n      </div>\n    </section>\n  );\n});\n\n","import React, {forwardRef, useImperativeHandle, useEffect}  from 'react';\nimport { sortBy } from \"lodash-es\";\nimport \"./enchantTable.css\"\n\nimport Config from '../configs/configs.json'; // 追加\nconst ENCHANTMENT_COLUMNS = Config.ENCHANTMENT_COLUMNS\nconst TABLE_LIMIT = Config.TABLE_LIMIT\nconst RARELITY_INFOS = Config.RARELITY_INFOS\n\nexport default  forwardRef((props, ref) => {\n  let originEnchants = props[\"data\"]\n  let [filterdEnchants, setFilterdEnchants] = React.useState(originEnchants)\n  let [enchants, setEnchants] = React.useState(originEnchants.slice(0, TABLE_LIMIT));\n  let [sortStatus, setSortStatus] = React.useState({column:null, type:null});\n  let [marginTop, setMarginTop] = React.useState(-window.scrollY);\n  let [targetEnchant, setTargetEnchant] = React.useState(null);\n\n  // console.log(\"EnchantTable!!!!\", filterdEnchants, enchants, props, ref)\n  \n\n  const selectEnchant = (e, row) => {\n    // console.log(\"Table selectEnchant\", e, props[\"id\"], row, props)\n    //親\n    props[\"parent\"].selectEnchant(props[\"id\"], row);\n    props[\"parent\"].closeEnchantModal();\n  }\n\n  const changeSorting = (column) =>{\n    setSortStatus({column: column, type: sortStatus[\"type\"]===\"asc\"? \"desc\": \"asc\"})\n    \n    let _filterdEnchants;\n    if (sortStatus[\"type\"]===\"asc\"){\n      _filterdEnchants = sortBy(originEnchants, column)\n    }else{\n      _filterdEnchants = sortBy(originEnchants, column).reverse()\n    }\n    \n    setFilterdEnchants(_filterdEnchants)\n    let new_enchants = _filterdEnchants.slice(0, TABLE_LIMIT)\n    setEnchants(new_enchants)\n    // console.log(\"sortStatus\", sortStatus)\n  }\n  \n  const trackScrolling = (e) => {\n    // console.log(e, e.target.scrollTop, e.target.offsetHeight, e.target.scrollHeight)\n    if(e.target.scrollHeight < e.target.scrollTop + e.target.offsetHeight){\n      // console.log(\"filterdEnchants\", filterdEnchants)\n      setEnchants(enchants.concat(filterdEnchants.slice(enchants.length, enchants.length+TABLE_LIMIT)))\n      // console.log(\"bottom\", e, enchants)\n    }\n  };\n\n  useEffect(() => {\n  });\n\n  // The component instance will be extended\n  // with whatever you return from the callback passed\n  // as the second argument\n  useImperativeHandle(ref, () => ({\n    updateEquipList(equip_list) {\n      setEnchants(equip_list);\n    }\n  }));\n\t\n  let sectionDom = null;\n  let tbodyDom = null;\n\n  const mouseMove = (e) => {\n    let elements = [].slice.call( e.target.closest(\"tbody\").children ) ;\n\n    let index = elements.indexOf( e.target.closest(\"tr\") )-1;\n    \n    setTargetEnchant(enchants[index])\n\n    if(tbodyDom==null){\n      sectionDom = document.querySelector('.enchantTableSection');\n      tbodyDom = sectionDom.querySelector('.balloon');\n    }\n    \n    tbodyDom.style.left = window.scrollX - sectionDom.offsetLeft + sectionDom.scrollLeft + e.clientX + 25 + \"px\";\n    tbodyDom.style.top = - sectionDom.offsetTop + sectionDom.scrollTop + e.clientY - 7 + \"px\";\n    \n  }\n\n  const dom = (\n    <section className=\"enchantTableSection modalTable\" onScroll={trackScrolling} style={{marginTop:marginTop}}>\n      <table className=\"enchantTable\">\n        <thead>\n          <tr>\n            {ENCHANTMENT_COLUMNS.map(column => (\n              <th key={column[\"accessor\"]+\"_enchantTable\"} onClick={(e)=>{changeSorting(column['accessor'])}}>\n                {column['Header']}\n                <span>{sortStatus[\"column\"]===column['accessor'] ? (sortStatus[\"type\"]===\"asc\" ? ' ▼' : ' ▲') : ' 　'}</span>\n              </th>\n            ))}\n          </tr>\n        </thead>\n        <tbody onMouseMove={(e)=>{mouseMove(e)}} onMouseIn={(e)=>{mouseMove(e)}}>\n          <span className=\"balloon\">\n            {\n              (function () {\n                let datas = ENCHANTMENT_COLUMNS.map((column) => {\n                  let key = column[\"accessor\"]\n                  if(targetEnchant!=null && Object.keys(targetEnchant).indexOf(key)!==-1 \n                    && targetEnchant[key]!==0\n                    && key!==\"name\"\n                  ){\n                    let value = targetEnchant[key]\n                    return <div key={column[\"accessor\"]+\"_balloon\"}>{column[\"Header\"]}: {value}</div>\n                  }else{\n                    return 0;\n                  }\n                })\n\n                datas = datas.filter((n) => { return n !== undefined });\n\n                if(datas.length===0){\n                  datas.push(<div>(なし)</div>)\n                }\n\n                return datas\n              }())\n            }\n          </span>\n          {enchants.map(enchant => {\n            let selected = false;\n            for(let targetEnchant of props[\"parent\"].equip_part.enchantments){\n              if(targetEnchant!=null && enchant[\"name\"]===targetEnchant[\"name\"]){\n                selected = true;\n              }\n              \n            }\n\n            let row = (\n              <tr\n                className={selected?\"selected\":\"\"}\n                onClick={(e) => selectEnchant(e, enchant)}\n              >\n                {ENCHANTMENT_COLUMNS.map((column, i) => (\n                  <td key={column[\"accessor\"]+\"_enchant_row\"}\n                    style={{color:(column.accessor===\"name\")?RARELITY_INFOS[enchant[\"rarelity\"]].color:\"\"}}\n                  >\n                    {enchant[column.accessor]}\n                  </td>\n                ))}\n              </tr>\n            )\n            return row\n          })}\n        </tbody>\n      </table>\n    </section>\n  );\n\n  return dom\n});\n\n","/* eslint-disable array-callback-return */\nimport \"./equipSelector.css\"\nimport React, {createRef}  from 'react';\n\n// import EnchantTable from \"./enchantTable copy.js\";\nimport EquipTable from \"./equipTable.js\";\nimport EnchantTable from \"./enchantTable.js\";\n\nimport Config from '../configs/configs.json'; // 追加\nconst items = require('../assets/item_infos/item.json');\nconst EQUIP_COLUMNS = Config.EQUIP_COLUMNS\nconst ENCHANTMENT_COLUMNS = Config.ENCHANTMENT_COLUMNS\nconst RARELITY_INFOS = Config.RARELITY_INFOS\n\nexport default class EquipSelector extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = { \n      isEquipOpen: false, \n      isEnchantOpens: [false, false, false, false], \n      targetEquip: null, \n      targetEnchants: [null, null, null, null], \n      searchEquipText: \"\", \n      searchEnchantTexts: [\"\", \"\", \"\", \"\"]\n    };\n    this.timeOutId = null;\n\t\n  \tthis.name = props[\"equip_part\"][\"title\"];\n  \tthis.frame_position = props[\"frame_position\"];\n  \tthis.parent = props[\"parent\"];\n  \t\n  \tthis.equips_list = props[\"equip_list\"];\n  \tthis.equip_part = props[\"equip_part\"];\n\n  \tthis.enchantment_list = props[\"enchantment_list\"];\n\n    this.openEquipModal = this.openEquipModal.bind(this);\n    this.closeEquipModal = this.closeEquipModal.bind(this);\n    this.handleEquipChange = this.handleEquipChange.bind(this);\n    this.onBlurHandler = this.onBlurHandler.bind(this);\n    this.onFocusHandler = this.onFocusHandler.bind(this);\n    this.onClickHandler = this.onClickHandler.bind(this);\n    this.selectEquip = this.selectEquip.bind(this);\n    this.selectEnchant = this.selectEnchant.bind(this);\n\n\n    this.equipTableRef = createRef();\n    this.enchantTableRef = this.equip_part.enchantments.map((_, i) => createRef());\n    this.enchantTableDom = this.equip_part.enchantments.map((_, i) => null);\n\n    this.enchantStatus = this.equip_part.enchantments.map((_, i) => {return {}});\n\n    // console.log(\"EquipSelector\", this)\n  }\n\n  selectEquip(row) {\n    // console.log(\"EquipSelector selectEquip\", row, this.parent, this.state)\n    this.setState({targetEquip: row});\n\n    this.equip_part.target = row\n    this.parent.updateStatus()\n  }\n\n  selectEnchant(index, row) {\n    // console.log(\"EquipSelector selectEnchant\", index, row, this.parent, this.state)\n\n    this.equip_part.enchantments[index] = row;\n\n    this.enchantStatus[index] = {}\n    if(row!=null){\n      ENCHANTMENT_COLUMNS.map(column => {\n        let key = column[\"accessor\"]\n        if(Object.keys(row).indexOf(key)!==-1 \n          && row[key]!==0\n          && key!==\"name\"\n        ){\n          let value = row[key]\n          this.enchantStatus[index][key] = value;\n        }\n        return 0;\n      })\n    }\n\n    this.parent.updateStatus();\n  }\n\n  openEquipModal() {\n    // console.log(\"openEquipModal\", this)\n\n    for(let equipPartRef of this.parent.equipPartRefs){\n      equipPartRef.current.closeAllModal()\n    }\n\n    let _enchantTable = [];\n    this.state.isEnchantOpens.map(()=>{\n      _enchantTable.push(false);\n    });\n\n    this.setState(currentState => ({\n      isEquipOpen: true,\n      isEnchantOpens: _enchantTable\n      // isEquipOpen: !currentState.isEquipOpen\n    }));\n    // console.log(this.state.isEquipOpen)\n  }\n\n  openEnchantModal(index, e) {\n    // console.log(\"openEnchantModal\", this)\n\n    for(let equipPartRef of this.parent.equipPartRefs){\n      equipPartRef.current.closeAllModal()\n    }\n\n    let _enchantTable = [];\n    for (let i in this.isEnchantOpens){\n      if (i===index){\n        _enchantTable.push(true);\n      }else{\n        _enchantTable.push(false);\n      }\n    }\n\n    _enchantTable[index] = true;\n    this.setState(currentState => ({\n      isEquipOpen: false,\n      isEnchantOpens: _enchantTable\n      // isEquipOpen: !currentState.isEquipOpen\n    }));\n  }\n\n  closeEquipModal() {\n    this.setState(currentState => ({\n      isEquipOpen: false\n      // isEquipOpen: !currentState.isEquipOpen\n    }));\n  }\n\n  closeEnchantModal() {\n    this.setState(currentState => ({\n      isEnchantOpens:[false, false, false, false]\n    }));\n  }\n\n  closeAllModal() {\n    this.setState(currentState => ({\n      isEquipOpen: false,\n      isEnchantOpens:[false, false, false, false]\n      // isEquipOpen: !currentState.isEquipOpen\n    }));\n  }\n\n  handleEquipChange(e) {\n    this.setState({searchEquipText:e.target.value})\n    let filterd_equips_list = [];\n\n    if (this.equipTableRef.current){\n      for(let equip of this.equips_list){\n        if(equip[\"name\"].indexOf(e.target.value)!==-1){\n          filterd_equips_list.push(equip)\n        }\n      }\n      // console.log(\"handleEquipChange\", !this.equipTableRef.current, this.state.searchEquipText, filterd_equips_list)\n      this.equipTableRef.current.updateEquipList(filterd_equips_list);\n    }\n  }\n\n  handleEnchantChange(index, e) {\n    let _searchEnchantTexts = this.state.searchEnchantTexts.slice();\n    _searchEnchantTexts[index] = e.target.value;\n    this.setState(currentState => ({\n      searchEnchantTexts: _searchEnchantTexts\n    }));\n\n    let filterd_enchant_list = [];\n\n    if (this.enchantTableRef[index].current){\n      for(let enchantment of this.enchantment_list){\n        if(enchantment[\"name\"].indexOf(e.target.value)!==-1){\n          filterd_enchant_list.push(enchantment)\n        }\n      }\n      // console.log(\"handleEnchantChange\", this.enchantTableRef[index].current, this.state.searchEnchantTexts, filterd_enchant_list)\n      this.enchantTableRef[index].current.updateEquipList(filterd_enchant_list);\n    }\n  }\n\n  onBlurHandler(e) {\n    // console.log(\"onBlurHandler\", this, e, e.currentTarget)\n    this.timeOutId = setTimeout(() => {\n    });\n  }\n\n  onClickHandler(e) {\n    // console.log(\"onClickHandler\", this, e, e.currentTarget)\n  }\n\n  // If a child receives focus, do not close the popover.\n  onFocusHandler() {\n    clearTimeout(this.timeOutId);\n  }\n\n  setEquipTable(){\n    this.filtered_equips_list = [];\n    for(let equip of this.equips_list){\n      if(equip[\"name\"].indexOf(this.state.searchEquipText)!==-1){\n        this.filtered_equips_list.push(equip)\n      }\n    }\n    this.equipTableDom = ( <EquipTable ref={this.equipTableRef} parent={this} EQUIP_COLUMNS={EQUIP_COLUMNS} data={this.filtered_equips_list} target_equip={this.name} />);\n    return this.equipTableDom\n  }\n\n  setEnchantTable(index){\n    let filtered_enchantment_list = [];\n\n    for(let enchant of this.enchantment_list){\n      if(enchant[\"name\"].indexOf(this.state.searchEnchantTexts[index])!==-1){\n        filtered_enchantment_list.push(enchant);\n      }\n    }\n    this.enchantTableDom[index] = ( \n      <EnchantTable \n        ref={this.enchantTableRef[index]} \n        id={index} \n        parent={this} \n        data={filtered_enchantment_list} \n        target_enchant={this.equip_part.enchantments[index]} \n      />);\n    return this.enchantTableDom[index];\n  }\n\n  MaterialInfo(){\n    const target_equip = this.state.targetEquip;\n\n    let origin_material = {}\n  \n    let material_tree = {};\n    let _material_tree = {num:1, materials:{}}\n    material_tree[target_equip[\"name\"]] = _material_tree;\n    \n    check_material(target_equip.materials, _material_tree[\"materials\"], target_equip[\"name\"], 1)\n    get_origin_materials(target_equip[\"name\"], _material_tree, origin_material)\n\n    function check_material(material, material_tree, parent_name, parent_num){\n      if(material!=null){\n        for (let material_name of Object.keys(material)){\n          let _material = items[material_name]\n          \n          let total_num = material[material_name]*parent_num\n          \n          let _material_tree = {num: total_num, materials:{}}\n          material_tree[material_name] = _material_tree\n          \n          if(parent_name===material_name)continue;\n          \n          check_material(_material[\"materials\"], _material_tree[\"materials\"], material_name, total_num);\n        }\n      }\n    }\n    \n    function get_origin_materials(name, material, origin_material){\n      if (material[\"materials\"]==null || Object.keys(material[\"materials\"]).length===0){\n        if(origin_material[name]==null){\n          origin_material[name] = material[\"num\"]\n        }else{\n          origin_material[name] += material[\"num\"]\n        }\n      }\n      \n      for (let material_name of Object.keys(material[\"materials\"])){\n        let _material = material[\"materials\"][material_name]\n        get_origin_materials(material_name, _material, origin_material)\n      }\n    }\n    \n    let dom = (\n      <>\n        {\n          Object.keys(material_tree).map((key, i)=>{\n            // console.log(\"\\t\", material_tree)\n            return (\n              <div className=\"overOriginMaterial\" key={key+\"overOriginMaterial\"}>\n                <div className=\"headTable\">原材料合計</div>\n                <div>\n                  {\n                    (Object.keys(origin_material).length===1&&Object.keys(origin_material)[0]===key)?\n                    (<div>なし</div>):\n                    Object.keys(origin_material).map((key, j)=>{\n                      return(<div key={key+\"overOriginMaterial_material\"}>{key}×{origin_material[key]}</div>)\n                    })\n                  }\n                </div>\n              </div>\n            )\n          })\n        }\n      </>\n    );\n    return dom\n  }\n  \n\n  clearEquip(e){\n    // console.log(\"clearEquip\", e, this)\n    this.selectEquip(null);\n  }\n\n  clearEnchant(e, i){\n    // console.log(\"clearEnchant\", e, i, this)\n    this.selectEnchant(i, null)\n  }\n  \n  mouseMove(e, i){\n    // tbodyDom.style.left = window.scrollX - sectionDom.offsetLeft + sectionDom.scrollLeft + e.clientX + 25 + \"px\";\n    // tbodyDom.style.top = - sectionDom.offsetTop + sectionDom.scrollTop + e.clientY - 7 + \"px\";\n    \n    let top = window.scrollY + e.clientY - 7 + \"px\";\n    let left =  window.scrollX + e.clientX + 25 + \"px\";\n    this.parent.setState(currentState => ({\n      enchantInfoBalloon: {top:top, left:left, data:this.enchantStatus[i]}\n    }));\n  }\n\n  mouseOut(e, i){\n    this.parent.setState(currentState => ({\n      enchantInfoBalloon: null\n    }));\n  }\n  \n  render() {\n    let table_style = {position:\"absolute\", zIndex:10, maxWidth:\"1100px\"}\n    table_style[this.frame_position] = 0\n\n    return (\n      <article className={'equipmentFrame ' + this.equip_part['code']}>\n        <div className=\"title\">{this.name}</div>\n        <div className=\"equipInfo\">\n          {this.state.targetEquip && (\n            <>\n              {this.MaterialInfo()}\n              <div className=\"equipName\">{this.state.targetEquip.name}</div>\n              <div className=\"equipStatus\">\n                ATK:{this.state.targetEquip.atk}&nbsp;\n                MATK:{this.state.targetEquip.matk}&nbsp;\n                DEF:{this.state.targetEquip.def}&nbsp;\n                ASPD:{this.state.targetEquip.aspd}\n              </div>\n            </>\n          )}\n        </div>\n        <div className=\"inputEquip\">\n          <span className=\"clearEquip\" onClick={(e)=>{this.clearEquip(e)}}>×</span>\n          <input type=\"search\" id=\"name\" name=\"name\" autoComplete=\"off\" size=\"25\"  value={this.state.searchEquipText} onChange={this.handleEquipChange} onClick={this.openEquipModal}/>\n          {this.state.isEquipOpen && this.setEquipTable()}\n        </div>\n        <div className=\"enchantment_list\">\n          {this.equip_part.enchantments.map((equip_part, i) => {\n            return(\n              <div key={i+\"enchantment_list\"}>\n                <div className=\"inputEnchant\">\n                  <span className=\"clearEnchant\" onClick={(e)=>{this.clearEnchant(e, i)}}>×</span>\n                  <input type=\"search\" id=\"name\" name=\"name\" autoComplete=\"off\" size=\"10\" \n                    value={this.state.searchEnchantTexts[i]} \n                    onChange={(e)=>{this.handleEnchantChange(i, e)}} \n                    onClick={(e)=>{this.openEnchantModal(i, e)}}\n                  />\n                  {this.state.isEnchantOpens[i] && this.setEnchantTable(i)}\n                </div>\n                {this.equip_part.enchantments[i] && (\n                  <span className=\"enchantInfo\" \n                    onMouseMove={(e)=>{this.mouseMove(e, i)}} \n                    onMouseOut={(e)=>{this.mouseOut(e, i)}}\n                    style={{color:RARELITY_INFOS[this.equip_part.enchantments[i][\"rarelity\"]].color}}\n                  >\n                    {this.equip_part.enchantments[i][\"name\"]}\n                  </span>\n                )}\n              </div>\n            )\n          })}\n        </div>\n        \n      </article>\n    );\n  }\n}","/* eslint-disable array-callback-return */\nimport './App.css';\nimport React, {createRef} from 'react';\n\nimport EquipSelector from \"./components/equipSelector\";\nimport MaterialTreeSection from \"./components/materialTreeSection\";\n\nimport Config from './configs/configs.json';\nimport Info from './configs/info.json';\nconst EQUIP_LABELS = Config.EQUIP_LABELS;\nconst STATUS_LABELS = Config.STATUS_LABELS;\nconst INPUT_STATUS_LABELS = Config.INPUT_STATUS_LABELS;\nconst UNIQUE_LABELS = Config.UNIQUE_LABELS;\nconst EQUIP_STATUS_KEY_LABELS = Config.EQUIP_STATUS_KEY_LABELS;\nconst STATUS_RANGES = Config.STATUS_RANGES;\nconst ENCHANTMENT_COLUMNS = Config.ENCHANTMENT_COLUMNS\nconst RARELITY_INFOS = Config.RARELITY_INFOS\n\nconst head_equips = require('./assets/equip_infos/頭装備.json');\nconst body_equips = require('./assets/equip_infos/体装備.json');\nconst glider_equips = require('./assets/equip_infos/グライダー.json');\nconst accessory_equips = require('./assets/equip_infos/アクセサリー.json');\nconst other_equips = require('./assets/equip_infos/弾・戦闘補助.json');\nconst shield_equips = require('./assets/equip_infos/盾.json');\nconst one_h_sword_equips = require('./assets/equip_infos/片手剣.json');\nconst two_h_sword_equips = require('./assets/equip_infos/両手剣.json');\nconst spear_equips = require('./assets/equip_infos/槍.json');\nconst bow_equips = require('./assets/equip_infos/弓.json');\nconst gun_equips = require('./assets/equip_infos/銃.json');\nconst tool_equips = require('./assets/equip_infos/ツール.json');\n\nlet enchantment_list = require('./assets/enchantment_infos/enchantment.json');\n\n  let ENCHANT_CONVERTER = {\n    エンチャント名: \"name\",\n    ATK: \"atk\",\n    ATK割合: \"atk_per\",\n    MATK: \"matk\",\n    MATK割合: \"matk_per\",\n    \"DEFのN%ATK増加\": \"def_for_atk\",\n    \"DEFのN%MATK増加\": \"def_for_matk\",\n    DEF: \"def\",\n    DEF割合: \"def_per\",\n    最大スタ: \"stamina\",\n    最大スタ割合: \"stamina_per\",\n    最大マナ: \"mana\",\n    最大マナ割合: \"mana_per\",\n    最大ライフ: \"life\",\n    最大ライフ割合: \"life_per\",\n    最大満腹度: \"hunger\",\n    最大満腹度割合: \"hunger_per\",\n\n    移動速度: \"mv\",\n    空中速度: \"amv\",\n\n    ASPD: \"aspd\",\n    アイテムCD: \"item_cd\",\n    スキルCD: \"skill_cd\",\n    物理クリダメ: \"crit_dmg\",\n    物理クリ確率: \"crit_per\",\n    魔法クリダメ: \"mcrit_dmg\",\n    魔法クリ確率: \"mcrit_per\",\n    マナ自然回復量: \"mana_recovery_per\",\n    スタミナ自然回復量: \"stamina_recovery_per\",\n    満腹度消費量:\"hunger_utility_per\",\n  }\n\n  for(let enchantment of enchantment_list){\n    for(let old_key of Object.keys(enchantment)){\n      let new_key = ENCHANT_CONVERTER[old_key]\n      if(new_key==null)continue\n      delete Object.assign( enchantment, {[new_key]: enchantment[old_key] })[old_key];\n    }\n  }\n\nconst where_to_equip ={\n  \"right_hand\":[\"one_h_sword_equips\", \"two_h_sword_equips\", \"spear_equips\", \"bow_equips\", \"gun_equips\", \"tool_equips\"],\n  \"head\":[\"head_equips\"], \n  \"body\":[\"body_equips\"], \n  \"left_hand\":[\"shield_equips\", \"one_h_sword_equips\"], \n  \"accessory1\":[\"accessory_equips\"],\n  \"accessory2\":[\"accessory_equips\"],\n  \"glider\":[\"glider_equips\"], \n  \"other\":[\"other_equips\"], \n}\n\nlet equip_parts = [\n  { code: \"right_hand\", title: \"武器\", style:{top:\"20px\", left:\"20px\"}, options:[], target:null, equip_list:[], enchantments:[null, null, null, null] },\n  { code: \"head\", title: \"頭装備\", style:{top:\"80px\", left:\"20px\" }, options:[], target:null, equip_list:[], enchantments:[null, null, null, null]},\n  { code: \"body\", title: \"体\", style:{top:\"140px\", left:\"20px\" }, options:[], target:null, equip_list:[], enchantments:[null, null, null, null]},\n  { code: \"left_hand\", title: \"左手\", style:{top:\"200px\", left:\"20px\" }, options:[], target:null, equip_list:[], enchantments:[null, null, null, null]},\n  { code: \"accessory1\", title: \"アクセサリー1\", style:{top:\"20px\", right:\"20px\" }, options:[], target:null, equip_list:[], enchantments:[null, null, null, null]},\n  { code: \"accessory2\", title: \"アクセサリー2\", style:{top:\"80px\", right:\"20px\" }, options:[], target:null, equip_list:[], enchantments:[null, null, null, null]},\n  { code: \"glider\", title: \"グライダー\", style:{top:\"140px\", right:\"20px\" }, options:[], target:null, equip_list:[], enchantments:[null, null, null, null]},\n  { code: \"other\", title: \"戦闘補助\", style:{top:\"200px\", right:\"20px\" }, options:[], target:null, equip_list:[], enchantments:[null, null, null, null]},\n];\n\n// 装備一覧インポート\nfor(let equip_part of equip_parts){\n  let equip_list = []\n  \n  for(let target_json_name of where_to_equip[equip_part.code]){\n    let json_datas = eval(target_json_name);\n    \n    for(let json_data of json_datas){\n      \n      let target_equip = {}\n      target_equip[\"type\"] = EQUIP_LABELS[target_json_name]\n      for(let EQUIP_STATUS_KEY of Object.keys(EQUIP_STATUS_KEY_LABELS)){\n        let EQUIP_STATUS_LABEL= EQUIP_STATUS_KEY_LABELS[EQUIP_STATUS_KEY]\n        target_equip[EQUIP_STATUS_KEY] = (json_data[EQUIP_STATUS_LABEL]!=null)?json_data[EQUIP_STATUS_LABEL]:0\n      }\n      equip_list.push(target_equip)\n      \n    }\n  }\n  equip_part.list = equip_list;\n}\n\nlet status = {\n  life:0,\n  stamina:0,\n  mana:0,\n  atk:0,\n  matk:0,\n  def:0,\n  aspd:0,\n  hunger:0,\n  mv:0,\n  amv:0,\n  item_cd:0,\n  skill_cd:0,\n  crit_per:0,\n  crit_dmg:0,\n  mcrit_per:0,\n  mcrit_dmg:0,\n  mana_recovery_per:0,\n  stamina_recovery_per:0,\n  hunger_utility_per:0,\n}\nlet basic_status = {}\nObject.keys(INPUT_STATUS_LABELS).map((key, i) => {\n  basic_status[key] = 0;\n})\n\nlet addition_status = {\n  life:0,\n  stamina:0,\n  mana:0,\n  atk:0,\n  matk:0,\n  def:0,\n  hunger:0,\n}\n\nlet multiply_per_status ={\n  life:0,\n  stamina:0,\n  mana:0,\n  atk:0,\n  matk:0,\n  def:0,\n  hunger:0,\n}\n\nlet multiply_per_sum_status ={\n  life:0,\n  stamina:0,\n  mana:0,\n  atk:0,\n  matk:0,\n  def:0,\n  hunger:0,\n}\n\nlet per_status ={\n  mv:0,\n  amv:0,\n  aspd:0,\n  item_cd:0,\n  skill_cd:0,\n  crit_per:0,\n  crit_dmg:0,\n  mcrit_per:0,\n  mcrit_dmg:0,\n  mana_recovery_per:0,\n  stamina_recovery_per:0,\n  hunger_utility_per:0,\n}\n\nlet unique_status = {\n  atk:{\n    def_for_atk:0,\n  },\n  matk:{\n    def_for_matk:0,\n  }\n}\n\nlet unique_result_status = {\n  atk:{\n    def_for_atk:0,\n  },\n  matk:{\n    def_for_matk:0,\n  }\n}\n\n\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.equipPartRefs = equip_parts.map((_, i) => createRef());\n    this.materialTreeRefs = createRef()\n\n    this.state = { \n      basic_status: {...basic_status}, \n      result_status: {...status}, \n      isEnchantOpens: false,\n      targetSave: 0, \n      titleNames:[\"\", \"\", \"\"],\n      targetTable:null,\n      enchantInfoBalloon: null,\n\n      material_enchants: Array(equip_parts.length)\n    };\n\n    this.updateStatus = this.updateStatus.bind(this);\n    this.changeBasicStatus = this.changeBasicStatus.bind(this);\n    this.onClickHandler = this.onClickHandler.bind(this);\n    this.openEnchantTable = this.openEnchantTable.bind(this);\n    this.importSavedata = this.importSavedata.bind(this);\n    this.exportSavedata = this.exportSavedata.bind(this);\n    this.clearAll = this.clearAll.bind(this);\n\n  }\n\n  componentDidMount(){\n    this.importSavedata(0)\n  }\n\n  updateStatus(){\n    // console.log(\"App updateStatus\", equip_parts)\n    \n    let res = {}\n    for(let key of Object.keys(this.state.result_status)){\n      res[key] = 0;\n    }\n\n    for(let key of Object.keys(addition_status)){\n      addition_status[key] = 0\n    }\n    for(let key of Object.keys(multiply_per_status)){\n      multiply_per_status[key] = 0\n    }\n    for(let key of Object.keys(per_status)){\n      per_status[key] = 0\n    }\n    for(let key1 of Object.keys(unique_status)){\n      for(let key2 of Object.keys(unique_status[key1])){\n        unique_status[key1][key2] = 0\n      }\n    }\n\n    for (let key of Object.keys(this.state.basic_status)){\n      addition_status[key] += this.state.basic_status[key]\n    }\n    for(let equip_part of equip_parts){\n      if(equip_part.target != null){\n        for(let key of Object.keys(equip_part.target)){\n          let value = equip_part.target[key]\n\n          if(value == null)continue\n\n          if (addition_status[key]!=null){\n            addition_status[key] += value\n          }\n\n          if ( Object.keys(multiply_per_status).map((a, i)=>{return a+\"_per\"}).indexOf(key)!==-1){\n            multiply_per_status[key] += value\n          }\n\n          if (per_status[key]!=null){\n            per_status[key] += value\n          }\n\n          for(let key1 of Object.keys(unique_status)){\n            for(let key2 of Object.keys(unique_status[key1])){\n              if (unique_status[key1][key]!=null){\n                unique_status[key1][key2] += value\n              }\n            }\n          }\n        }\n      }\n      for(let enchantment of equip_part.enchantments){\n        if(enchantment == null)continue\n        \n        for(let key of Object.keys(enchantment)){\n          let value = enchantment[key]\n          if(value == null)continue\n\n          if ( key in addition_status){\n            addition_status[key] += value\n          }\n\n          if ( Object.keys(multiply_per_status).map((a, i)=>{return a+\"_per\"}).indexOf(key)!==-1){\n            multiply_per_status[key.replace(\"_per\", \"\")] += value\n          }\n\n          if ( key in per_status){\n            per_status[key] += value\n          }\n\n          for(let key1 of Object.keys(unique_status)){\n            for(let key2 of Object.keys(unique_status[key1])){\n              if (unique_status[key1][key]!=null){\n                unique_status[key1][key2] += value\n              }\n            }\n          }\n        }\n      }\n    }\n    \n    for (let key of Object.keys(res)){\n      res[key] += addition_status[key]\n\n      if(key in multiply_per_status){\n        multiply_per_sum_status[key] = Math.round(((addition_status[key]<0)?0:addition_status[key])*multiply_per_status[key]*0.01)\n        res[key] += ((addition_status[key]<0)?0:addition_status[key])*multiply_per_status[key]*0.01\n        res[key] = Math.round(res[key]*1000)/1000\n      }\n      \n      if(key in per_status){\n        res[key] = per_status[key]\n      }\n    }\n\n    for (let key of Object.keys(res)){\n      if(unique_status[key]){\n        for(let key2 of Object.keys(unique_status[key])){\n          if(key2 === \"def_for_atk\"){\n            unique_result_status[key][key2] = Math.round(res[\"def\"]*unique_status[key][key2]/100);\n            res[key] += unique_result_status[key][key2];\n          }else if(key2 === \"def_for_matk\"){\n            unique_result_status[key][key2] = Math.round(res[\"def\"]*unique_status[key][key2]/100);\n            res[key] += unique_result_status[key][key2];\n          }\n        }\n      }\n    }\n    for (let key of Object.keys(res)){\n      res[key] = Math.round(res[key]);\n    }\n\n    // console.log(\"updateStatus\", this.state.basic_status, addition_status ,multiply_per_status, unique_status, res)\n    this.setState({result_status:res})\n  }\n\n\n  changeBasicStatus(e, key){\n    let value = e.target.value*1\n    if(value == null){\n      value = 0;\n    }\n    let _basic_status = this.state.basic_status;\n    _basic_status[key] = value;\n\n    this.setState(currentState => ({\n      basic_status: _basic_status,\n    }));\n    \n    this.updateStatus();\n    // console.log(\"changeBasicStatus\", e, key, this.state.basic_status, this.state.result_status)\n  }\n\n\n  onClickHandler(e){\n    // console.log(\"App onClickHandler\", e, equip_parts)\n    if (!e.target.closest(\".inputEquip\")&&!e.target.closest(\".inputEnchant\")) {\n      for(let equip_part_ref of this.equipPartRefs){\n        if(equip_part_ref.current)\n          equip_part_ref.current.closeAllModal()\n      }\n      this.setState({isEnchantOpens:false})\n    }\n  }\n\n  openEnchantTable(table_index, enchantIndex, e){\n    // console.log(\"openEnchantTable\", this.state.isEnchantOpens, table_index, enchantIndex, e)\n    this.setState({isEnchantOpens:!this.state.isEnchantOpens})\n  }\n\n  importSavedata(index){\n    // console.log(\"importSavedata\", index, savedata)\n\n    this.setState({targetSave:index})\n    let fileFrames = document.getElementsByClassName(\"fileFrame\");\n\n    for (let fileFrame of fileFrames)\n      fileFrame.classList.remove(\"targetSavedata\")\n\n      fileFrames[index].classList.add(\"targetSavedata\")\n    \n    const strage_index = \"save_\"+index;\n    const savedata_str = localStorage.getItem(strage_index);\n\n    if (savedata_str ==null){\n      this.clearAll();\n      return;\n    }\n\n    const savedata = JSON.parse(savedata_str)\n\n    for(let equip_part_index in equip_parts){\n      let equip_part = equip_parts[equip_part_index]\n      const code = equip_part.code;\n      \n      let target_equip = null\n      if (Object.keys(savedata.equips).indexOf(code)!==-1){\n        const equip_name = savedata.equips[code].name;\n\n        for(let target_json_name of where_to_equip[equip_part.code]){\n          let json_datas = eval(target_json_name);\n\n          for(let json_data of json_datas){\n            if (json_data[\"アイテム名\"]!==equip_name) continue;\n\n            target_equip = {}\n            target_equip[\"type\"] = EQUIP_LABELS[target_json_name]\n            for(let EQUIP_STATUS_KEY of Object.keys(EQUIP_STATUS_KEY_LABELS)){\n              let EQUIP_STATUS_LABEL= EQUIP_STATUS_KEY_LABELS[EQUIP_STATUS_KEY]\n              target_equip[EQUIP_STATUS_KEY] = (json_data[EQUIP_STATUS_LABEL]!=null)?json_data[EQUIP_STATUS_LABEL]:0\n            }\n\n            break;\n          }\n        }\n      }\n      this.equipPartRefs[equip_part_index].current.selectEquip(target_equip);\n\n      for(let enchantment_index in equip_part.enchantments){\n        \n        let value = null\n        if (Object.keys(savedata.equips).indexOf(code)!==-1){\n          let save_enchantment_name = savedata.equips[code].enchantments[enchantment_index]\n          if (save_enchantment_name!==null){\n            for(let enchantment of enchantment_list){ //これ最適化できないか\n              if(save_enchantment_name === enchantment[\"name\"]){\n                value = enchantment;\n                break;\n              }\n            }\n          }\n        }\n        this.equipPartRefs[equip_part_index].current.selectEnchant(enchantment_index, value)\n      }\n    }\n\n    let _basic_status = {...basic_status}\n    for(let status_key in this.state.basic_status){\n      if(savedata[\"basic_status\"][status_key] !=null)\n        _basic_status[status_key] = savedata[\"basic_status\"][status_key];\n    }\n    \n    this.setState({basic_status:_basic_status});\n    this.state.basic_status = _basic_status;\n    this.updateStatus();\n\n  }\n\n\n  exportSavedata(e, index){\n    let savedata = {}\n    savedata[\"equips\"] = {}\n    savedata[\"basic_status\"] = this.state.basic_status\n\n    for(const equip_part of equip_parts){\n      if(equip_part.target===null)continue;\n\n      savedata[\"equips\"][equip_part.code] = {\n        name:equip_part.target.name,\n        enchantments:[]\n      }\n      for(const index in equip_part.enchantments){\n        const enchantment = equip_part.enchantments[index]\n        if(enchantment==null) continue;\n\n        savedata[\"equips\"][equip_part.code].enchantments.push(enchantment.name)\n      }\n    }\n\n    const strage_index = \"save_\"+index;\n    const savedata_str = JSON.stringify(savedata)\n\n    localStorage.setItem(strage_index, savedata_str);\n  }\n  \n  clearAll(e){\n    // console.log(\"clearAll\", e)\n\n    for(let equip_part_index in equip_parts){\n      let equip_part = equip_parts[equip_part_index]\n\n      this.equipPartRefs[equip_part_index].current.selectEquip(null);\n\n      for(let enchantment_index in equip_part.enchantments){\n        this.equipPartRefs[equip_part_index].current.selectEnchant(enchantment_index, null)\n      }\n    }\n\n    let _basic_status = this.state.basic_status\n    for(let status_key in this.state.basic_status){\n      _basic_status[status_key] = 0\n    }\n    \n    this.updateStatus()\n  }\n\n  scroll(e, className){\n    let  element = document.getElementsByClassName(className)[0];\n    \n    window.scroll({\n      top: element.offsetTop,\n      behavior: \"smooth\"\n    });\n  }\n\n  setPerResult(key){\n    let value = this.state.result_status[key]\n\n    if(STATUS_RANGES[key]!=null\n      && STATUS_RANGES[key][0]!=null && this.state.result_status[key]<STATUS_RANGES[key][0]){\n      value = STATUS_RANGES[key][0]\n    }else if(STATUS_RANGES[key]!=null\n      && STATUS_RANGES[key][1]!=null && STATUS_RANGES[key][1]<this.state.result_status[key]){\n      value = STATUS_RANGES[key][1]\n    }\n\n    return (value);\n  }\n\n  render() {\n    window.addEventListener('scroll', (e) => {\n      let enchant_table_doms = document.getElementsByClassName(\"enchantTableSection\")\n      \n      if (enchant_table_doms.length>0){\n        enchant_table_doms[0].style.marginTop = -1*window.scrollY+\"px\"\n      }\n    });\n\n    return (\n      <div className=\"App\" \n        onClick={this.onClickHandler} \n      >\n        <div className=\"enchantInfoBalloon\"\n          style={(this.state.enchantInfoBalloon!=null) ? {top:this.state.enchantInfoBalloon.top, left:this.state.enchantInfoBalloon.left} : {display:\"none\"}}\n        >{\n          ((this.state.enchantInfoBalloon!=null)&&Object.keys(this.state.enchantInfoBalloon.data).length>0)?\n          ENCHANTMENT_COLUMNS.map(column => {\n            let key = column[\"accessor\"]\n            if(Object.keys(this.state.enchantInfoBalloon.data).indexOf(key)!==-1 \n              && this.state.enchantInfoBalloon.data[key]!==0\n              && key!==\"name\"\n            ){\n              let value = this.state.enchantInfoBalloon.data[key]\n              return <div><span>{column[\"Header\"]}</span>: {value}</div>\n            }\n          }):<div>(なし)</div>\n        }</div>\n        <header>Craftpia 装備シミュレーター</header>\n        <section className=\"saveSection\">\n          <div>\n            <div>\n              <div className=\"fileFrame\">\n                <input type=\"button\" className=\"fileButton\" value=\"file0\" onClick={(e)=>this.importSavedata(0)} />\n                <input type=\"button\" className=\"saveButton\" value=\"save0\" onClick={(e)=>this.exportSavedata(e, 0)} />\n              </div>\n            </div>\n            <div>\n              <div className=\"fileFrame\">\n                <input type=\"button\" className=\"fileButton\" value=\"file1\" onClick={(e)=>this.importSavedata(1)} />\n                <input type=\"button\" className=\"saveButton\" value=\"save1\" onClick={(e)=>this.exportSavedata(e, 1)} />\n              </div>\n            </div>\n            <div>\n              <div className=\"fileFrame\">\n                <input type=\"button\" className=\"fileButton\" value=\"file2\" onClick={(e)=>this.importSavedata(2)} />\n                <input type=\"button\" className=\"saveButton\" value=\"save2\" onClick={(e)=>this.exportSavedata(e, 2)} />\n              </div>\n            </div>\n          </div>\n          <input type=\"button\" className=\"clearButton\" value=\"clear\" onClick={(e)=>this.clearAll(e)} />\n        </section>\n        \n        <div className=\"scrollButton\">\n          <div>\n            <div onClick={(e)=>{this.scroll(e, \"saveSection\")}}>入力画面</div>\n            <div onClick={(e)=>{this.scroll(e, \"enchantDetail\")}}>エンチャント詳細</div>\n            <div onClick={(e)=>{this.scroll(e, \"materialSection\")}}>素材ツリー</div>\n            \n          </div>\n        </div>\n\n        \n        <section className=\"main\">\n          <div>\n            <section className=\"status\">\n              <article className=\"basicStatus\">\n                <div className=\"title\" >基礎ステータス</div>\n                <table>\n                  <thead>\n                    <tr role=\"row\">\n                      <th></th>\n                      <th>基礎ステータス</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {Object.keys(INPUT_STATUS_LABELS).map((key, i) => { \n                      return(\n                        <tr key={key}>\n                          <td>{INPUT_STATUS_LABELS[key]}</td>\n                          <td>\n                            <input type=\"number\" \n                              min=\"0\"\n                              style={{textAlign: \"right\", width: \"80px\"}} \n                              value={this.state.basic_status[key]}\n                              onChange={(e)=>{this.changeBasicStatus(e, key)}}\n                            />\n                          </td>\n                        </tr>\n                      )\n                    })}\n                  </tbody>\n                </table>\n              </article>\n\n              <article className=\"totalStatus\">\n                <div className=\"title\">合計ステータス</div>\n                <table>\n                  <thead>\n                    <tr role=\"row\">\n                      <th></th>\n                      <th>固定値合計</th>\n                      <th>割合合計</th>\n                      <th>特殊合計</th>\n                      <th>合計</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {Object.keys(STATUS_LABELS).map((key, i) => { \n                      if(addition_status[key]!=null){\n                        return(\n                          <tr key={key+\"_RES_STATUS\"}>\n                            <td>{STATUS_LABELS[key]}</td>\n                            <td>\n                              {(addition_status[key]<0)?0:addition_status[key]}\n                              <span className=\"over\">{(addition_status[key]<0)?`(${addition_status[key]})`:\"\"}</span>\n                            </td>\n                            <td>{(multiply_per_status[key]>0)?\"+\":\"\"}{multiply_per_status[key]}%({(multiply_per_sum_status[key]>0)?\"+\":\"\"}{multiply_per_sum_status[key]})</td>\n                            <td>{\n                              (unique_status[key]!=null)?\n                              Object.keys(unique_status[key]).map((key2, j)=>{\n                                if(unique_status[key][key2]!=null && unique_status[key][key2]!==0)\n                                  return `${UNIQUE_LABELS[key2]} ${unique_status[key][key2]}(+${unique_result_status[key][key2]})`\n                              }):\"\"\n                            }</td>\n                            <td>\n                              {(this.state.result_status[key]<0)?0:this.state.result_status[key]}\n                              <span className=\"over\">{(this.state.result_status[key]<0)?`(${this.state.result_status[key]})`:\"\"}</span>\n                            </td>\n                          </tr>\n                        )\n                      }else if(per_status[key]!=null){\n                        return(\n                          <tr key={key+\"_RES_STATUS\"}>\n                            <td>{STATUS_LABELS[key]}</td>\n                            <td></td>\n                            <td>{(per_status[key]>0)?\"+\":\"\"}{per_status[key]}%</td>\n                            <td>{\n                              (unique_status[key]!=null)?\n                              Object.keys(unique_status[key]).map((key2, j)=>{\n                                if(unique_status[key][key2]!=null && unique_status[key][key2]!==0)\n                                  return `${UNIQUE_LABELS[key2]} ${unique_status[key][key2]}(+${unique_result_status[key][key2]})`\n                              }):\"\"\n                            }</td>\n                            <td>\n                              <span className={\n                                ((STATUS_RANGES[key]!=null&&STATUS_RANGES[key][0]!=null)&&(this.state.result_status[key]<STATUS_RANGES[key][0])\n                                ||(STATUS_RANGES[key]!=null&&STATUS_RANGES[key][1]!=null)&&(STATUS_RANGES[key][1]<this.state.result_status[key])) ? 'over' : ''}>\n                              {(this.state.result_status[key]>0)?\"+\":\"\"}\n                              {this.setPerResult(key)}\n                              %\n                              {/* <span className=\"over\"> */}\n                                {\n                                  (STATUS_RANGES[key]!=null&&STATUS_RANGES[key][0]!=null)&&(this.state.result_status[key]<STATUS_RANGES[key][0])?`(${this.state.result_status[key]-STATUS_RANGES[key][0]})`:\"\"\n                                }\n                                {\n                                  (STATUS_RANGES[key]!=null&&STATUS_RANGES[key][1]!=null)&&(STATUS_RANGES[key][1]<this.state.result_status[key])?`(${this.state.result_status[key]-STATUS_RANGES[key][1]})`:\"\"\n                                }\n                              </span>\n                            </td>\n                          </tr>\n                        )\n                      }\n                    })}\n                  </tbody>\n                </table>\n              </article>\n            </section>\n\n            <section className=\"equipSelectors\">\n              <div className=\"equipTableCell left\">\n                {equip_parts.map((equip_part, i) => {\n                  if (i<=3){\n                    return (\n                      <EquipSelector\n                        ref={this.equipPartRefs[i]}\n                        key={i+\"_equipSelectors\"}\n                        parent={this} \n                        table_index={i}\n                        equip_part={equip_part}\n                        equip_list={equip_part.list}\n                        enchantment_list = {enchantment_list}\n                        frame_position=\"left\"\n                        className=\"equip_selector\"\n                        />\n                    )\n                  }\n                })}\n              </div>\n              <div className=\"equipTableCell right\">\n                {equip_parts.map((equip_part, i) => {\n                  if (i>3){\n                    return (\n                      <EquipSelector\n                        ref={this.equipPartRefs[i]}\n                        key={i+\"_equipSelectors\"}\n                        parent={this} \n                        table_index={i}\n                        equip_part={equip_part}\n                        equip_list={equip_part.list}\n                        enchantment_list = {enchantment_list}\n                        frame_position=\"right\"\n                        className=\"equip_selector\"\n                      />\n                    )\n                  }\n                })}\n              </div>\n            </section>\n          </div>\n        </section>\n\n        <article className=\"enchantDetail\">\n          <div>\n            <div className=\"title\">エンチャント詳細</div>\n            <table>\n              <thead>\n                <tr role=\"row\">\n                  <th>装備箇所</th>\n                  <th>名称</th>\n                  <th>エンチャント</th>\n                </tr>\n              </thead>\n              <tbody>\n                {equip_parts.map((equip_part, i) => { \n                  return(\n                    <tr key={i+\"enchantDetail\"}>\n                      <td>{equip_part.title}</td>\n                      <td>{equip_part.target && equip_part.target.name}</td>\n                      <td>\n                        {equip_part.enchantments &&\n                          Object.keys(equip_part.enchantments).map((i) => {\n                            let enchantment = equip_part.enchantments[i]\n                            if(enchantment!=null){\n                              return (<div key={i+\"enchantDetail_get\"}>\n                                <span \n                                  style={{color:RARELITY_INFOS[enchantment[\"rarelity\"]].color}}\n                                >{enchantment.name}</span>\n                                \n                              ({enchantment[\"備考\"]}\n                              {(enchantment[\"備考\"]!==\"\")&&(enchantment[\"ト\"]===\"○\")&&\"、 \"}\n                              {(enchantment[\"ト\"]===\"○\")&&\"トレジャー\"}\n                              )</div>)\n                            }\n                          })\n                        }\n                      </td>\n                    </tr>\n                  )\n                })}\n              </tbody>\n            </table>\n          </div>\n        </article>\n        \n        <MaterialTreeSection ref={this.materialTreeRefs} equip_parts={equip_parts} parent={this} />\n        \n        <section className=\"history\">\n          <article>\n            <div>履歴</div>\n            <div className=\"log\">\n              \n              <div>2021/09/29: 実装</div>\n            </div>\n          </article>\n        </section>\n\n        <section className=\"unimplemented\">\n          <article>\n            <div>未実装機能</div>\n            <ul>\n              <li>装備・エンチャントが持つスキル情報</li>\n              <li>アイテムを捧げたことによるステータス上昇の入力（物理クリティカルなど）</li>\n              <li>パッチ v20210930.1502　未対応</li>\n              \n            </ul>\n          </article>\n        </section>\n\n        <footer>\n          <span>last update: 2021/9/24</span>\n          <span>ゲームver：{Info.gamepatch}</span>\n          <span>情報は <a href=\"https://seesaawiki.jp/craftopia/\">Craftopia/クラフトピア Wiki</a> 様を参考にさせていただいております。</span>\n        </footer>\n      </div>\n    );\n    }\n}\n","import React, {forwardRef, createRef}  from 'react';\n\nimport './materialTreeSection.css';\n\nconst items = require('../assets/item_infos/item.json');\n\nlet MaterialTreeChild = forwardRef((props, ref) => {\n  let materials = props[\"materials\"]\n\n  return (\n    <div>\n      {\n        Object.keys(materials).map((key, i)=>{\n          // console.log(\"\\t\", materials)\n          return (\n            <div key={key}>\n              <div className=\"treeChild\" >\n                <div className=\"treeParent\">\n                  <div>\n                    <span style={{whiteSpace:\"nowrap\"}}>{key}</span>\n                    <span style={{whiteSpace:\"nowrap\"}}>×{materials[key][\"num\"]}</span>\n                  </div>\n                </div>\n                <MaterialTreeChild materials={materials[key][\"materials\"]} />\n              </div>\n            </div>\n          )\n        })\n      }\n    </div>\n  );\n})\n\n\n\n\nlet MaterialTree = forwardRef((props, ref) => {\n  let equipPart = props[\"equip_part\"]\n  let origin_material = {}\n\n  let dom = (\n    <div className=\"materialTree\">\n      <div>{equipPart.title}</div>\n      <div></div>\n      <div>{equipPart.target && equipPart.target.name}</div>\n    </div>)\n\n  if(equipPart.target!=null){\n    let target_equip = equipPart.target;\n\n    // console.log(\"target_equip\", target_equip)\n    let material_tree = {};\n    let _material_tree = {num:1, materials:{}}\n    material_tree[target_equip[\"name\"]] = _material_tree;\n    \n    check_material(target_equip.materials, _material_tree[\"materials\"], target_equip[\"name\"], 1)\n    // console.log(\"material_tree\", material_tree)\n    \n    get_origin_materials(target_equip[\"name\"], _material_tree, origin_material)\n    // console.log(\"origin_material\", origin_material)\n    \n    function check_material(material, material_tree, parent_name, parent_num){\n      if(material!==null){\n        for (let material_name of Object.keys(material)){\n          let _material = items[material_name]\n          \n          let total_num = material[material_name]*parent_num\n          \n          let _material_tree = {num: total_num, materials:{}}\n          material_tree[material_name] = _material_tree\n          \n          if(parent_name===material_name)continue;\n          \n          check_material(_material[\"materials\"], _material_tree[\"materials\"], material_name, total_num);\n        }\n      }\n    }\n    \n    function get_origin_materials(name, material, origin_material){\n      if (material[\"materials\"]==null || Object.keys(material[\"materials\"]).length===0){\n        if(origin_material[name]==null){\n          origin_material[name] = material[\"num\"]\n        }else{\n          origin_material[name] += material[\"num\"]\n        }\n      }\n      \n      for (let material_name of Object.keys(material[\"materials\"])){\n        let _material = material[\"materials\"][material_name]\n        get_origin_materials(material_name, _material, origin_material)\n      }\n    }\n    \n    dom = (\n      <>\n        {\n          Object.keys(material_tree).map((key, i)=>{\n            // console.log(\"\\t\", material_tree)\n            return (\n              <div className=\"materialTree\" key={i+\"materialTree\"}>\n                <div className=\"equip_type\">{equipPart.title}</div>\n                <div className=\"treeAncestor\">\n                  <div>\n                    <div className=\"treeParent\">{key}</div>\n                    <MaterialTreeChild materials={material_tree[key][\"materials\"]} />\n                  </div>\n                </div>\n                <div className=\"originMaterial\">\n                  <div>\n                    {\n                      Object.keys(origin_material).map((key, i)=>{\n                        return(<div key={i+\"_originMaterial\"}>{key}×{origin_material[key]}</div>)\n                      })\n                    \n                    }\n                  </div>\n                </div>\n              </div>\n\n            )\n          })\n        }\n      </>\n    );\n  }\n\n  return dom;\n})\n\n\nexport default  forwardRef((props, ref) => {\n  let equip_parts = props[\"equip_parts\"]\n  \n  let equipRefs = equip_parts.map((_, i) => createRef());\n  \n  return (\n    <article className=\"materialSection\">\n      <div className=\"title\">素材ツリー</div>\n      <div className=\"body\">\n        <div className=\"table\">\n          <div className=\"materialTreeHead headTable\">\n            <div>装備箇所</div>\n            <div>素材ツリー</div>\n            <div>原材料</div>\n          </div>\n          {equip_parts.map((equip_part, i) => {\n            return (\n              <MaterialTree ref={equipRefs[i]} key={i} equip_part={equip_part} parent={this} />\n            )\n          })}\n        </div>\n      </div>\n    </article>\n  )\n})\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}